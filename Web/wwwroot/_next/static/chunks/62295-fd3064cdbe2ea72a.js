(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[62295],{40358:(e,t,r)=>{"use strict";r.d(t,{A:()=>T});var a=r(95155),s=r(12115),i=r(34798),l=r(26121),n=r(63667),o=r(2981),c=r(33067),d=r(37511),u=r(56565),m=r(94187),h=r(92963),p=r(11618),f=r(31566),j=r(93956);r(19938);let x=e=>{let{name:t,value:r,onChange:i,category:l="service-images"}=e,[n,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)(r),u=async e=>{let r=e.target.files[0];if(!r)return;o(!0);let a=new FormData;a.append("file",r),a.append("category",l);try{let e=await fetch("/api/upload",{method:"POST",body:a}),r=await e.json();r.success?(d(r.path),i(t,r.path)):alert("Failed to upload image")}catch(e){alert("Error uploading image")}finally{o(!1)}};return(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsxs)(p.A.Group,{children:[(0,a.jsx)(p.A.Label,{children:"Image Upload"}),(0,a.jsx)(p.A.Control,{type:"file",accept:"image/*",onChange:u,disabled:n}),n&&(0,a.jsx)("div",{className:"text-muted mt-2",children:"Uploading..."}),c&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("div",{style:{position:"relative",width:"200px",height:"200px"},children:(0,a.jsx)(Image,{src:r,alt:"".concat(t," preview"),fill:!0,style:{objectFit:"contain"}})})})]})})};var g=r(47353),y=r.n(g),v=r(70719),b=r.n(v);let _=(0,r(77711).default)(()=>r.e(94999).then(r.t.bind(r,20402,23)),{loadableGenerated:{webpack:()=>[20402]},ssr:!1,loading:()=>(0,a.jsx)("p",{children:"Loading..."})}),F=(e,t)=>{let r=["image","img","src","logo","icon","photo","thumbnail","avatar"].some(t=>e.toLowerCase().includes(t)),a="string"==typeof t&&(t.startsWith("/assets/")||t.startsWith("/public/")||t.startsWith("http")&&/\.(jpg|jpeg|png|gif|webp|svg)$/i.test(t)||/\.(jpg|jpeg|png|gif|webp|svg)$/i.test(t));return r||a},A=(e,t)=>{let r=["url","link","href","website","site"].some(t=>e.toLowerCase().includes(t)),a="string"==typeof t&&(t.startsWith("http")||t.startsWith("/")||t.startsWith("#"));return r||a},N=(e,t)=>{let r=["html","content","body"].some(t=>e.toLowerCase().includes(t)),a="string"==typeof t&&/<[^>]*>/g.test(t);return r||a},C=(e,t)=>{if(null==t)return"text";if("boolean"==typeof t)return"boolean";if("number"==typeof t)return"number";if(Array.isArray(t))return"array";if("object"==typeof t)return"object";if("string"==typeof t){if(F(e,t))return"image";if(N(e,t))return"html";if(A(e,t));else if(t.length>100)return"textarea"}return"text"},S=(e,t)=>{if(null==e)return"Item ".concat(t+1);if("object"!=typeof e){let t=String(e);return t.length>30?"".concat(t.substring(0,27),"..."):t}if(Array.isArray(e))return"Array (".concat(e.length," items)");for(let t of["title","name","id","label"])if(e[t]&&"string"==typeof e[t]&&""!==e[t].trim())return e[t];for(let[r,a]of Object.entries(e))if(F(r,a)){let e="string"==typeof a?a.split("/").pop():"";return e?"".concat(r,": ").concat(e):"Item ".concat(t+1)}return"Item ".concat(t+1)},k=e=>{let{item:t,index:r,path:i,remove:l,move:n,totalItems:c}=e,[d,u]=(0,s.useState)(0===r),f=S(t,r),j=(0,m.j7)(),x=null!==t&&"object"==typeof t&&!Array.isArray(t);return(0,a.jsxs)(o.A,{className:y().arrayItem,children:[(0,a.jsxs)(o.A.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,a.jsx)("div",{className:"d-flex align-items-center",children:(0,a.jsx)("span",{children:f})}),(0,a.jsxs)("div",{className:y().itemActions,children:[(0,a.jsx)(h.A,{variant:"outline-secondary",size:"sm",className:"me-1",disabled:0===r,onClick:()=>n(r,r-1),children:(0,a.jsx)("i",{className:"fas fa-arrow-up"})}),(0,a.jsx)(h.A,{variant:"outline-secondary",size:"sm",className:"me-1",disabled:r===c-1,onClick:()=>n(r,r+1),children:(0,a.jsx)("i",{className:"fas fa-arrow-down"})}),x&&(0,a.jsx)(h.A,{variant:"outline-secondary",size:"sm",onClick:()=>u(!d),className:"me-1",children:(0,a.jsx)("i",{className:"fas fa-".concat(d?"chevron-up":"chevron-down")})}),(0,a.jsx)(h.A,{variant:"outline-danger",size:"sm",onClick:()=>l(r),children:(0,a.jsx)("i",{className:"fas fa-trash-alt"})})]})]}),x&&d&&(0,a.jsx)(o.A.Body,{children:(0,a.jsx)(P,{data:t,path:"".concat(i)})}),!x&&(0,a.jsx)(o.A.Body,{children:(0,a.jsx)(p.A.Control,{type:"number"==typeof t?"number":"text",value:(e=>null==e?"":"object"==typeof e?JSON.stringify(e):String(e))(t),onChange:e=>{let r=e.target.value;"number"==typeof t?r=""===r?0:parseFloat(r):"boolean"==typeof t&&(r=!!r),j.setFieldValue(i,r)}})})]})},w=e=>{let{name:t,value:r,path:s}=e,i=(0,m.j7)(),l=Array.isArray(r)?r:[],n=()=>{if(0===l.length){let e=s.split("."),t=e[e.length-1].toLowerCase();return t.includes("urls")||t.includes("links")?"":t.includes("numbers")||t.includes("amounts")?0:!(t.includes("flags")||t.includes("toggles"))&&(t.includes("dates")?new Date().toISOString().split("T")[0]:"")}let e=l[0];if("object"!=typeof e||null===e)switch(typeof e){case"string":return"";case"number":return 0;case"boolean":return!1;default:return null}try{let t=structuredClone(e),r=e=>{if(e&&"object"==typeof e)return Object.keys(e).forEach(t=>{let a=e[t];Array.isArray(a)?e[t]=[]:"object"==typeof a&&null!==a?e[t]=r(structuredClone(a)):e[t]="string"==typeof a?"":"number"==typeof a?0:"boolean"!=typeof a&&null}),e};return r(t),"id"in t&&(t.id="temp_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))),"createdAt"in t&&(t.createdAt=new Date().toISOString()),"order"in t&&(t.order=l.length),t}catch(e){return{}}},o=e=>{let t=[...l];t.splice(e,1),i.setFieldValue(s,t)},c=(e,t)=>{if(t<0||t>=l.length)return;let r=[...l],[a]=r.splice(e,1);r.splice(t,0,a),i.setFieldValue(s,r)};return(0,a.jsxs)("div",{className:y().arrayFieldContainer,children:[(0,a.jsxs)("div",{className:y().arrayHeader,children:[(0,a.jsx)("h6",{className:"m-0",children:t}),(0,a.jsxs)(f.A,{bg:"info",children:[l.length," items"]})]}),l.length>0?(0,a.jsx)("div",{className:"array-items",children:null==l?void 0:l.map((e,t)=>(0,a.jsx)(k,{item:e,index:t,path:"".concat(s,"[").concat(t,"]"),remove:o,move:c,totalItems:l.length},"".concat(s,"-item-").concat(t)))}):(0,a.jsx)("div",{className:"text-center p-3 bg-light rounded mb-3",children:(0,a.jsx)("em",{children:"No items"})}),(0,a.jsxs)(h.A,{variant:"primary",size:"sm",onClick:()=>{let e=[...l,n()];i.setFieldValue(s,e)},children:[(0,a.jsx)("i",{className:"fas fa-plus me-1"})," Add Item"]})]})},E=e=>{let{name:t,value:r,path:i}=e,[l,n]=(0,s.useState)(!0);(0,m.j7)();let c=r&&"object"==typeof r&&!Array.isArray(r)?r:{},d=Object.keys(c).length;return(0,a.jsxs)(o.A,{className:y().objectFieldCard,children:[(0,a.jsxs)(o.A.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,a.jsxs)("h6",{className:"m-0",children:[t," ",d>0&&(0,a.jsxs)(f.A,{bg:"secondary",children:[d," properties"]})]}),(0,a.jsx)(h.A,{variant:"outline-secondary",size:"sm",onClick:()=>n(!l),children:(0,a.jsx)("i",{className:"fas fa-".concat(l?"chevron-up":"chevron-down")})})]}),l&&(0,a.jsx)(o.A.Body,{children:d>0?(0,a.jsx)(P,{data:c,path:i}):(0,a.jsx)("div",{className:"text-center p-3 bg-light rounded",children:(0,a.jsx)("em",{children:"Empty object"})})})]})},I=e=>{let{name:t,path:r}=e,s=(0,m.j7)(),i=B(s.values,r),l=i&&"string"==typeof i&&""!==i.trim()&&(i.startsWith("http")||i.startsWith("/")||i.startsWith("data:image"));return(0,a.jsxs)("div",{className:y().imageFieldContainer,children:[l&&(0,a.jsxs)("div",{className:y().imagePreview,children:[(0,a.jsx)("div",{style:{position:"relative",width:"200px",height:"200px"},children:(0,a.jsx)(j.default,{src:i,alt:"".concat(t," preview"),fill:!0,style:{objectFit:"contain"}})}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsxs)("small",{className:"text-muted d-block",children:["Path: ",i]})})]}),(0,a.jsx)(x,{name:r,value:null,onChange:(e,t)=>{t&&"string"==typeof t&&t.trim()?s.setFieldValue(e,t.trim()):s.setFieldValue(e,null)},category:"service-images"})]})},O=e=>{let{name:t,path:r}=e,i=(0,m.j7)(),l=B(i.values,r),n=(0,s.useRef)(null);return(0,a.jsx)("div",{className:y().htmlFieldContainer,children:(0,a.jsx)("div",{"data-gramm":"false","data-gramm_editor":"false","data-enable-grammarly":"false",children:(0,a.jsx)(_,{ref:n,value:l||"",config:{readonly:!1,height:400,removeButtons:["grammarly"],disablePlugins:["grammarly"],askBeforePasteHTML:!1,askBeforePasteFromWord:!1,defaultActionOnPaste:"insert_clear_html",enableDragAndDropFileToEditor:!1,buttons:["source","|","bold","italic","underline","|","font","fontsize","paragraph","|","brush","background","|","align","|","ul","ol","|","link","table","|","undo","redo"],uploader:{insertImageAsBase64URI:!0},spellcheck:!1,language:"en",toolbarButtonSize:"medium",toolbarAdaptive:!1,showCharsCounter:!1,showWordsCounter:!1,showXPathInStatusbar:!1,createAttributes:{"data-gramm":"false","data-gramm_editor":"false","data-enable-grammarly":"false"}},onBlur:e=>{i.setFieldValue(r,e)},onChange:e=>{i.setFieldValue(r,e)},tabIndex:1})})})},P=e=>{let{data:t,path:r=""}=e,s=(0,m.j7)();if(!t||"object"!=typeof t)return null;let i=(e,t)=>e?(e.endsWith("]"),"".concat(e,".").concat(t)):t,l=Object.entries(t),n=l.filter(e=>{let[t,r]=e;return["text","textarea","number","boolean","url","image","html"].includes(C(t,r))}),o=l.filter(e=>{let[t,r]=e;return"object"===C(t,r)}),c=l.filter(e=>{let[t,r]=e;return"array"===C(t,r)});return(0,a.jsxs)("div",{className:"form-fields",children:[null==n?void 0:n.map(e=>{let[t,l]=e,n=i(r,t),o=C(t,l);if(t.startsWith("_"))return null;let c=B(s.values,n),d=V(s.errors,n),u=W(s.touched,n);return(0,a.jsxs)(p.A.Group,{className:"mb-3",children:[(0,a.jsx)(p.A.Label,{htmlFor:n,children:t.charAt(0).toUpperCase()+t.slice(1).replace(/([A-Z])/g," $1")}),"boolean"===o?(0,a.jsx)(p.A.Check,{type:"checkbox",id:n,name:n,label:t,checked:c||!1,onChange:e=>{s.setFieldValue(n,e.target.checked)},onBlur:()=>s.setFieldTouched(n,!0)}):"number"===o?(0,a.jsx)(p.A.Control,{type:"number",id:n,name:n,value:void 0!==c?c:"",onChange:e=>{s.setFieldValue(n,e.target.value)},onBlur:()=>s.setFieldTouched(n,!0)}):"textarea"===o?(0,a.jsx)(p.A.Control,{as:"textarea",id:n,name:n,rows:3,value:c||"",onChange:e=>{s.setFieldValue(n,e.target.value)},onBlur:()=>s.setFieldTouched(n,!0)}):"url"===o?(0,a.jsx)(p.A.Control,{type:"url",id:n,name:n,value:c||"",onChange:e=>{s.setFieldValue(n,e.target.value)},onBlur:()=>s.setFieldTouched(n,!0)}):"image"===o?(0,a.jsx)(I,{name:t,path:n}):"html"===o?(0,a.jsx)(O,{name:t,path:n}):(0,a.jsx)(p.A.Control,{type:"text",id:n,name:n,value:void 0!==c?c:"",onChange:e=>{s.setFieldValue(n,e.target.value)},onBlur:()=>s.setFieldTouched(n,!0)}),u&&d&&(0,a.jsx)(p.A.Text,{className:"text-danger",children:d})]},n)}),null==o?void 0:o.map(e=>{let[t,s]=e,l=i(r,t);return t.startsWith("_")?null:(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(E,{name:t,value:s,path:l})},l)}),null==c?void 0:c.map(e=>{let[t,s]=e,l=i(r,t);return t.startsWith("_")?null:(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(w,{name:t,value:s,path:l})},l)})]})},B=(e,t)=>{if(!t)return e;try{let r=t.replace(/\[(\w+)\]/g,".$1").split("."),a=e;for(let e of r){if(null==a)return;if(Array.isArray(a)&&!isNaN(parseInt(e))){let t=parseInt(e);if(!(t>=0)||!(t<a.length))return;a=a[t]}else{if("object"!=typeof a||!(e in a))return;a=a[e]}}return a}catch(e){return}},V=(e,t)=>{if(t&&e)try{let r=t.replace(/\[(\w+)\]/g,".$1").split("."),a=e;for(let e of r){if(!a||"object"!=typeof a)return;if(Array.isArray(a)&&!isNaN(parseInt(e))){let t=parseInt(e);if(!(t>=0)||!(t<a.length))return;a=a[t]}else{if(!(e in a))return;a=a[e]}}return a}catch(e){return}},W=(e,t)=>{if(!t||!e)return!1;try{let r=t.replace(/\[(\w+)\]/g,".$1").split("."),a=e;for(let e of r){if(!a||"object"!=typeof a)return!1;if(Array.isArray(a)&&!isNaN(parseInt(e))){let t=parseInt(e);if(!(t>=0)||!(t<a.length))return!1;a=a[t]}else{if(!(e in a))return!1;a=a[e]}}return!!a}catch(e){return!1}},J=e=>{let{data:t,onSubmit:r,className:i}=e,[l,n]=(0,s.useState)(null),o=(0,s.useRef)(null),c=(0,s.useMemo)(()=>t&&"object"==typeof t?JSON.parse(JSON.stringify(t)):{},[t]),d=(0,s.useCallback)(b()(e=>{r&&"function"==typeof r&&r(e)},500),[r]);return(0,s.useEffect)(()=>{t&&o.current&&JSON.stringify(t)!==JSON.stringify(l)&&(o.current.resetForm({values:JSON.parse(JSON.stringify(t))}),n(t))},[t,l]),(0,a.jsxs)("div",{children:[(0,a.jsx)("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"}),(0,a.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"}),(0,a.jsx)(m.l1,{innerRef:o,initialValues:c,onSubmit:()=>{},enableReinitialize:!1,validateOnChange:!1,children:e=>((0,s.useEffect)(()=>{e.dirty&&d(e.values)},[e.values,e.dirty]),(0,a.jsx)(m.lV,{className:i,children:(0,a.jsx)(P,{data:e.values,path:""})}))})]})};var R=r(14167),H=r.n(R),L=r(70707),D=r(93928);let T=e=>{var t;let{componentName:r,featureResponse:m,component:h,onChange:p,propsData:f,setPropsData:j}=e,[x,g]=(0,s.useState)(!1),[y,v]=(0,s.useState)(!0);(0,s.useEffect)(()=>{},[]),(0,s.useEffect)(()=>{(null==m?void 0:m.data)&&b({formData:null==m?void 0:m.data})},[null==m?void 0:m.data]);let b=e=>{let{formData:t}=e;if(!(null==f?void 0:f.props))return;let r={...f.props,...t};r&&j({...f,props:r})};return(0,a.jsx)(i.default,{fluid:!0,className:H().featureEditor,children:(0,a.jsxs)(l.default,{children:[(0,a.jsx)(n.default,{md:6,className:H().propertiesPanel,children:(0,a.jsxs)(o.A,{className:H().editorCard,children:[(0,a.jsx)(o.A.Header,{children:(0,a.jsx)("h5",{children:"Properties"})}),(0,a.jsx)(o.A.Body,{children:(0,a.jsxs)("div",{className:H().propertiesContainer,children:[y&&(0,a.jsxs)(c.A,{variant:"info",dismissible:!0,onClose:()=>v(!1),className:"mb-3",children:[(0,a.jsx)(c.A.Heading,{children:"Auto-Save Enabled"}),(0,a.jsx)("p",{children:"Changes to properties are automatically saved as you edit. You'll see an auto-save indicator when changes are being saved."})]}),x?(0,a.jsxs)("div",{className:H().loadingContainer,children:[(0,a.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,a.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,a.jsx)("p",{children:"Generating property editor..."})]}):(null==f?void 0:f.props)&&(null===(t=Object.keys(null==f?void 0:f.props))||void 0===t?void 0:t.length)>0?(0,a.jsxs)(d.A,{defaultActiveKey:"properties",id:"property-tabs",className:"mb-3",children:[(0,a.jsx)(u.A,{eventKey:"properties",title:"Property Edit",children:(0,a.jsx)(J,{data:(null==f?void 0:f.props)||{},onSubmit:e=>b({formData:e})})}),(0,a.jsx)(u.A,{eventKey:"other",title:"Json Schema",children:(0,a.jsx)("div",{className:"p-3",children:(0,a.jsx)(L.KE,{height:"500px",defaultLanguage:"json",value:JSON.stringify((null==f?void 0:f.props)||{},null,2),onChange:e=>{try{if(!(0,D.Fh)(e))return;let t=JSON.parse(e);t&&"object"==typeof t&&b({formData:t})}catch(e){}},options:{minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on"}})})})]}):(0,a.jsxs)("div",{className:H().emptyState,children:[(0,a.jsx)("i",{className:"fas fa-exclamation-circle"}),(0,a.jsx)("p",{children:"No component properties detected. Edit your code to include React components."})]})]})})]})}),(0,a.jsx)(n.default,{md:6,className:H().previewPanel,children:(0,a.jsxs)(o.A,{className:H().editorCard,children:[(0,a.jsx)(o.A.Header,{children:(0,a.jsxs)("h5",{children:["Preview: ",r]})}),(0,a.jsx)(o.A.Body,{children:(0,a.jsx)("div",{className:H().previewContainer,children:h?(0,a.jsx)(h,{...null==f?void 0:f.props}):(0,a.jsxs)("div",{className:H().emptyState,children:[(0,a.jsx)("i",{className:"fas fa-eye-slash"}),(0,a.jsx)("p",{children:"No preview available for this component."})]})})})]})})]})})}},93928:(e,t,r)=>{"use strict";r.d(t,{Fh:()=>i,ih:()=>s});var a=r(55037);let s=(e,t)=>{"success"==t?a.Ay.success(e):a.Ay.error(e)},i=e=>{try{return JSON.parse(e),!0}catch(e){return!1}}},14167:e=>{e.exports={featureEditor:"FeatureEditor_featureEditor__lpuVu",editorCard:"FeatureEditor_editorCard__ntR_g",propertiesPanel:"FeatureEditor_propertiesPanel__RAd40",propertiesContainer:"FeatureEditor_propertiesContainer__tCKoO",loadingContainer:"FeatureEditor_loadingContainer__QRJAc",previewPanel:"FeatureEditor_previewPanel__uEBD5",previewContainer:"FeatureEditor_previewContainer__lheQA",autoSaveIndicator:"FeatureEditor_autoSaveIndicator__Cw7Da",emptyState:"FeatureEditor_emptyState__f7rRl"}},47353:e=>{e.exports={formikSchemaForm:"FormikSchemaForm_formikSchemaForm__6b_Wi",arrayFieldContainer:"FormikSchemaForm_arrayFieldContainer__ODs2_",tabsFieldContainer:"FormikSchemaForm_tabsFieldContainer___CfBB",arrayHeader:"FormikSchemaForm_arrayHeader__xhp_K",tabsHeader:"FormikSchemaForm_tabsHeader__tVnoc",arrayItem:"FormikSchemaForm_arrayItem__JeNjC",objectFieldCard:"FormikSchemaForm_objectFieldCard__aqJsc",imageFieldContainer:"FormikSchemaForm_imageFieldContainer__ZtW5V",imagePreview:"FormikSchemaForm_imagePreview__NSu5K",formActions:"FormikSchemaForm_formActions__rbXZm",itemActions:"FormikSchemaForm_itemActions__3OdX1",navPills:"FormikSchemaForm_navPills__A6xEC",active:"FormikSchemaForm_active__NObR9",tabActions:"FormikSchemaForm_tabActions__Ka1Q_",tabContent:"FormikSchemaForm_tabContent__Osjn6",autoSaveIndicator:"FormikSchemaForm_autoSaveIndicator__tbKkA",htmlFieldContainer:"FormikSchemaForm_htmlFieldContainer__PqrH2","jodit-container":"FormikSchemaForm_jodit-container__ZCG7b","jodit-workplace":"FormikSchemaForm_jodit-workplace__sVqH7","jodit-status-bar":"FormikSchemaForm_jodit-status-bar__ZR7wd"}},81694:(e,t,r)=>{"use strict";r.d(t,{I:()=>s});var a=r(75828);let s=(0,a.createServerReference)("4037f4873262aa416c16646e51ac631b80ccb66a28",a.callServer,void 0,a.findSourceMapURL,"updateJsonData")}}]);